<!--[include file="newsletter_admin_std_header.html"]-->
<!--[add_additional_header header='<script type="text/javascript" src="modules/Newsletter/pnjavascript/checkall.js"></script>']-->
<!--[pnajaxheader modname="Newsletter" filename="newsletter.js"]-->
<!--[pnajaxheader modname="Newsletter"]-->

<script type="text/javascript">
    function disableSendChecked(){
        send2users.sendChecked.disabled = true;
    }
    onload = disableSendChecked;
</script>

<!--[newsletter_selector_active assign="active_values" return_keys=true all=true]-->
<!--[newsletter_selector_active assign="active_output" return_keys=false all=true]-->
<!--[newsletter_selector_approved assign="approved_values" return_keys=true all=true]-->
<!--[newsletter_selector_approved assign="approved_output" return_keys=false all=true]-->
<!--[newsletter_selector_frequency assign="frequency_values" return_keys=true all=true]-->
<!--[newsletter_selector_frequency assign="frequency_output" return_keys=false all=true]-->
<!--[newsletter_selector_language assign="language_values" return_keys=true all=true]-->
<!--[newsletter_selector_language assign="language_output" return_keys=false all=true]-->
<!--[newsletter_selector_type assign="type_values" return_keys=true all=true]-->
<!--[newsletter_selector_type assign="type_output" return_keys=false all=true]-->

<!--[gt text='Subscribers' assign='templatetitle']-->

<!--[pnsecgenauthkey assign="authid" module="Newsletter"]-->
<!--[pnmodgetvar assign="enable_multilingual" module="Newsletter" name="enable_multilingual" default=0]-->

<!--[pnsessiongetvar assign="currPagesize" name="pagesize" default="25" path="/Newsletter"]-->

  <h2><!--[$templatetitle]--></h2>

  <form class="z-adminform" action="<!--[pnmodurl modname="Newsletter" type="admin" func="view" ot=$ot]-->" name="langfilter" method="post" enctype="application/x-www-form-urlencoded">
    <div>
	<!--[gt text="All" assign=lblAll]-->
    <!--[gt text="Filter" assign=lblFilter]-->
	<!--[gt text="Data" assign=lblData]-->
	<!--[gt text="Edit" assign=lblEdit]-->
	<!--[gt text="Delete" assign=lblDelete]-->
	<!--[gt text="Yes" assign=lblyes]-->
	<!--[gt text="No" assign=lblno]-->
	<!--[gt text="Not send yet" assign=lblnotsendyet]-->
	<!--[gt text="Are you sure you wish to change the active status for this user?" assign=qActive]-->
	<!--[gt text="Are you sure you wish to change the approved status for this user?" assign=qApproved]-->
		
    <fieldset>
      <legend><strong><!--[gt text="Usersearch / Add a User"]--></strong></legend>

      <div id="liveusersearch" class="pn-hide">
        <div>
          <!--[gt text="Search"]-->&nbsp;<input size="30" maxlength="30" name="filter[search]" id="filter_search" value="" />
          <!--[pnimg id="ajax_indicator" style="display: none;" modname='core' set='icons/extrasmall' src="indicator_circle.gif" alt=""]-->

          <div id="filter_search_choices" class="nl_autocomplete_user"></div>
          <script type="text/javascript">
            liveusersearch();
          </script>
		  <img src="images/icons/extrasmall/add_user.gif" alt="<!--[gt text="Add a user"]-->" />&nbsp;<a href="<!--[pnmodurl modname="Newsletter" type="admin" func="edit" ot="user" authid=$authid]-->"><!--[gt text="Add a user"]--></a>

        </div>
		
		
      </div>
    </fieldset>

    <fieldset>
      <legend><strong>&nbsp;<!--[$lblFilter]-->&nbsp;</strong></legend>
       <ol id="filterlist" class="z-itemlist">
        <li class="z-itemheader z-clearfix">
            <!--[if ($enable_multilingual)]-->
			<span class="z-itemcell z-w25">   <!--[gt text="Language"]-->&nbsp;</span>
			<!--[/if]-->
            <span class="z-itemcell z-w25">  <!--[gt text="Type"]-->&nbsp;</span>
            <span class="z-itemcell z-w25">  <!--[gt text="Frequency"]-->&nbsp;</span>
            <span class="z-itemcell z-w15">  <!--[gt text="Active"]-->&nbsp;</span>
            <span class="z-itemcell z-w15">   <!--[gt text="Approved"]-->&nbsp;</span>         
		 </li>
		 <li class="<!--[cycle values="z-odd,z-even"]--> z-clearfix">
		 <!--[if ($enable_multilingual)]-->
		 <span class="z-itemcell z-w25"><select id="filter_lang" name="filter[lang]" onchange="this.form.submit();"><!--[html_options values=$language_values output=$language_output selected=$filter.lang]--></select></span>
		 <!--[/if]-->
		 <span class="z-itemcell z-w25"><select id="filter_type" name="filter[type]" onchange="this.form.submit();"><!--[html_options values=$type_values output=$type_output selected=$filter.type]--></select></span>
		 <span class="z-itemcell z-w25"><select id="filter_frequency" name="filter[frequency]" onchange="this.form.submit();"><!--[html_options values=$frequency_values output=$frequency_output selected=$filter.frequency|default:-1]--></select></span>
		 <span class="z-itemcell z-w15"><select id="filter_active" name="filter[active]" onchange="this.form.submit();"><!--[html_options values=$active_values output=$active_output selected=$filter.active]--></select></span>
		 <span class="z-itemcell z-w15"><select id="filter_approved" name="filter[approved]" onchange="this.form.submit();"><!--[html_options values=$approved_values output=$approved_output selected=$filter.approved]--></select></span> 
		 </li>
		</ol>
    </fieldset>
	</div>
  </form>
  
  
  
  <form class="z-adminform" name="send2users" action="<!--[pnmodurl modname="Newsletter" type="adminform" func="edit"]-->" method="post" enctype="application/x-www-form-urlencoded">
	<fieldset>	
	<legend><strong>&nbsp;<!--[$lblData]-->&nbsp;</strong></legend>
	<input type="hidden" name="authid" value="<!--[$authid]-->" />
    <input type="hidden" name="ot" value="newsletter_send" />
    <input type="hidden" name="otTarget" value="user" />
    <input type="hidden" name="sendType" value="manual" />
    <!--[if ($enable_multilingual)]-->
        <input type="hidden" name="language" value="<!--[$filter.lang]-->" />
    <!--[else]-->
        <!--[pnconfiggetvar assign="defaultlang" name="language" default="eng"]-->
        <input type="hidden" name="language" value="<!--[$defaultlang]-->" />
    <!--[/if]-->
<div style="text-align:right;">
          <!--[php]-->
              $psArray = array();
              $psArray[25]   = 25;
              $psArray[50]   = 50;
              $psArray[75]   = 75;
              $psArray[100]  = 100;
              $psArray[250]  = 250;
              $psArray[500]  = 500;
              $psArray[750]  = 750;
              $psArray[1000] = 1000;
              $psArray[-1]   = All;
              $this->assign ('pagesizes', $psArray);
          <!--[/php]-->
          <!--[gt text="Display # of users per page:"]-->
          <!--[foreach from=$pagesizes key="amount" item="label"]-->
            <!--[if ($amount == $currPagesize)]-->
              <!--[$label]-->&nbsp;
            <!--[else]-->
              <a href="<!--[pnmodurl modname="Newsletter" type="admin" func="view" ot="user" pagesize=$amount]-->"><!--[$label]--></a>&nbsp;
            <!--[/if]-->
          <!--[/foreach]-->
        </div>
    <ol id="datalist" class="z-itemlist">
        <li class="z-itemheader z-clearfix">
		<span class="z-itemcell z-w05"><input type="checkbox" onclick="checkAllFields(1);" id="checkAll" /></span>
		<span class="z-itemcell z-w10">    <!--[php]-->
             $this->_tpl_vars['filter']['sort'] = 'uid';
          <!--[/php]-->
        <a href="<!--[pnmodurl modname="Newsletter" type="admin" func="view" ot=$ot filter=$filter]-->"><!--[gt text="User ID"]--></a>
		</span>
		<span class="z-itemcell z-w10"><!--[php]-->
             $this->_tpl_vars['filter']['sort'] = 'name';
          <!--[/php]-->
          <a href="<!--[pnmodurl modname="Newsletter" type="admin" func="view" ot=$ot filter=$filter]-->"><!--[gt text="Username"]--></a>
        </span>
		<span class="z-itemcell z-w10"> <!--[php]-->
             $this->_tpl_vars['filter']['sort'] = 'email';
          <!--[/php]-->
          <a href="<!--[pnmodurl modname="Newsletter" type="admin" func="view" ot=$ot filter=$filter]-->"><!--[gt text="Email"]--></a>
        </span>
		<span class="z-itemcell z-w08"><!--[php]-->
             $this->_tpl_vars['filter']['sort'] = 'lang';
          <!--[/php]-->
         <a href="<!--[pnmodurl modname="Newsletter" type="admin" func="view" ot=$ot filter=$filter]-->"><!--[gt text="Language"]--></a>
        </span>
		<span class="z-itemcell z-w05"> <!--[php]-->
             $this->_tpl_vars['filter']['sort'] = 'type';
          <!--[/php]-->
          <a href="<!--[pnmodurl modname="Newsletter" type="admin" func="view" ot=$ot filter=$filter]-->"><!--[gt text="Type"]--></a>
        </span>
		<span class="z-itemcell z-w10"><!--[php]-->
             $this->_tpl_vars['filter']['sort'] = 'frequency';
          <!--[/php]-->
          <a href="<!--[pnmodurl modname="Newsletter" type="admin" func="view" ot=$ot filter=$filter]-->"><!--[gt text="Frequency"]--></a>
        </span>
		<span class="z-itemcell z-w10"><!--[php]-->
             $this->_tpl_vars['filter']['sort'] = 'active DESC';
          <!--[/php]-->
          <a href="<!--[pnmodurl modname="Newsletter" type="admin" func="view" ot=$ot filter=$filter]-->"><!--[gt text="Active"]--></a>
        </span>
		<span class="z-itemcell z-w08"><!--[php]-->
             $this->_tpl_vars['filter']['sort'] = 'approved DESC';
          <!--[/php]-->
          <a href="<!--[pnmodurl modname="Newsletter" type="admin" func="view" ot=$ot filter=$filter]-->"><!--[gt text="Approved"]--></a>
        </span>
		<span class="z-itemcell z-w10"><!--[php]-->
             $this->_tpl_vars['filter']['sort'] = 'last_send_date DESC';
          <!--[/php]-->
          <a href="<!--[pnmodurl modname="Newsletter" type="admin" func="view" ot=$ot filter=$filter]-->"><!--[gt text="Last sent"]--></a>
        </span>
		<span class="z-itemcell z-w08">  <!--[php]-->
             $this->_tpl_vars['filter']['sort'] = 'cr_date DESC';
          <!--[/php]-->
          <a href="<!--[pnmodurl modname="Newsletter" type="admin" func="view" ot=$ot filter=$filter]-->"><!--[gt text="Joindate"]--></a>
        </span>
		<span class="z-itemcell z-w06">
		<!--[gt text="Action"]-->
		</span>
		</li>
    
        <!--[securityutil_checkpermission assign="adminAuth" component="Newsletter::" instance="::" level="ACCESS_ADMIN"]-->       
        <!--[foreach from=$objectArray item=user]-->
          <li class="<!--[cycle values='z-odd,z-even']--> z-clearfix">
            <span class="z-itemcell z-w05"><input type="checkbox" name="user_array[]" value="<!--[$user.id|pnvarprephtmldisplay]-->" onclick="checkAllFields(2);" /></span>
            <span class="z-itemcell z-w10"><!--[if ($user.uid > 1)]--><a href="<!--[pnmodurl modname="Profile" type="user" func="view" uid=$user.uid]-->"><!--[$user.uid]--></a><!--[else]--><!--[gt text="no User ID"]--><!--[/if]--></span>
            <span class="z-itemcell z-w10"><!--[$user.name|pnvarprephtmldisplay]--></span>
            <span class="z-itemcell z-w10"><!--[$user.email|pnvarprephtmldisplay]--></span>
            <span class="z-itemcell z-w05"><!--[$user.lang|pnvarprephtmldisplay]--></span>
            <span class="z-itemcell z-w08">
              <!--[if ($user.type == 1)]--><!--[gt text="Text"]-->
              <!--[elseif ($user.type == 2)]--><!--[gt text="HTML"]-->
              <!--[elseif ($user.type == 3)]--><!--[gt text="Text with Link to Archive"]-->
              <!--[else]-->??????<!--[$user.type]--><!--[/if]-->
            </span>
        <span class="z-itemcell z-w10">
              <!--[if ($user.frequency == 0)]--><!--[gt text="Weekly"]-->
              <!--[elseif ($user.frequency == 1)]--><!--[gt text="Monthly"]-->
              <!--[elseif ($user.frequency == 2)]--><!--[gt text="Every 2 Months"]-->
              <!--[elseif ($user.frequency == 3)]--><!--[gt text="Every 3 Months"]-->
              <!--[elseif ($user.frequency == 6)]--><!--[gt text="Every 6 Months"]-->
              <!--[elseif ($user.frequency == 9)]--><!--[gt text="Every 9 Months"]-->
              <!--[elseif ($user.frequency == 12)]--><!--[gt text="Yearly"]-->
              <!--[else]-->??????<!--[$user.frequency]--><!--[/if]-->
            </span>
            <span class="z-itemcell z-w10"><a href="<!--[pnmodurl modname="Newsletter" type="adminform" func="edit" ot="user_active" otTarget="user" id=$user.id authid=$authid filter=$filter]-->" onclick="return confirm('<!--[$qActive]-->');"><!--[if ($user.active)]--><!--[$lblyes]--><!--[else]--><!--[$lblno]--><!--[/if]--></a></span>
            <span class="z-itemcell z-w08"><a href="<!--[pnmodurl modname="Newsletter" type="adminform" func="edit" ot="user_approved" otTarget="user" id=$user.id authid=$authid filter=$filter]-->" onclick="return confirm('<!--[$qApproved]-->');"><!--[if ($user.approved)]--><!--[$lblyes]--><!--[else]--><!--[$lblno]--><!--[/if]--></a></span>
            <span class="z-itemcell z-w10"><!--[if ($user.last_send_date)]--><!--[$user.last_send_date|pnvarprephtmldisplay]--><!--[else]--><!--[$lblnotsendyet]--><!--[/if]--></span>
            <span class="z-itemcell z-w08"><!--[$user.cr_date|pnvarprephtmldisplay]--></span>
            <span class="z-itemcell z-w06">
              <!--[if ($adminAuth)]-->
                <a href="<!--[pnmodurl modname="Newsletter" type="admin" func="edit" ot=$ot id=$user.id authid=$authid]-->"><!--[pnimg src='xedit.gif' modname='core' set='icons/extrasmall' alt='$lblEdit altml='false' title=$lblEdit titleml='false']--></a>
                <a href="<!--[pnmodurl modname="Newsletter" type="adminform" func="delete" ot=$ot id=$user.id authid=$authid]-->" onclick="return confirm('<!--[$lblDelete]-->');"><!--[pnimg src='cancel.gif' modname='core' set='icons/extrasmall' alt=$lblDelete altml='false' title=$lblDelete titleml='false']--></a>
              <!--[/if]-->
            </span>
          </li>
        <!--[/foreach]-->
		</ol>
		</fieldset>
    
	<fieldset>		
	<legend><strong>&nbsp;<!--[gt text="Action"]-->&nbsp;</strong></legend>
           <div style="float:left;">
            <!--[gt text="Update last sent date?"]-->
            <input type="checkbox" name="updateSendDate" value="1" />
            <b><!--[gt text="(checked=yes)"]--></b>
			<input type="hidden" name="authid" value="<!--[$authid]-->" />
            <input class="z-button" type="submit" value="<!--[gt text="Send to"]--> [0] <!--[gt text="Users"]-->" name="sendChecked" id="sendChecked" />
           </div>
    </fieldset>
  </form>

<!--[pager rowcount=$pager.numitems limit=$pager.itemsperpage posvar=startnum shift=1 img_prev=images/icons/extrasmall/previous.gif img_next=images/icons/extrasmall/next.gif]-->

<!--[include file="newsletter_std_footer.html"]-->
