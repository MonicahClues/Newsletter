<!--[add_additional_header header='<script type="text/javascript" src="modules/Newsletter/pnjavascript/checkall.js"></script>']-->
<!--[include file="nl_admin_menu.htm"]-->

<!--[pnthemegetvar name="bgcolor2" assign="bgcolor1"]-->
<!--[pnthemegetvar name="bgcolor3" assign="bgcolor2"]-->

<script type="text/javascript">
	function disableSendChecked(){
		send2users.sendChecked.disabled = true;
	}
	onload = disableSendChecked;
</script>

<div style="width:100%; margin:0px auto;">

<h2><!--[pnml name="_VIEW_SUBSCRIBERS"]--></h2>

	<div style="text-align:right; margin:20px auto; padding:5px 0px; border-top:1px dotted <!--[$bgcolor2]-->; border-bottom:1px dotted <!--[$bgcolor2]-->;">
		<form style="display:inline;" action="<!--[pnmodurl modname="Newsletter" type="admin" func="view_subscribers"]-->" method="post">
			<div>
				<input type="text" name="<!--[pnml name="_ITEMS_PER_PAGE"]-->" value="<!--[$itemsperpage]-->" style="width:30px;" />
				<input type="submit" value="Items per page" />
			</div>
		</form>
	</div>
	
<form name="send2users" action="<!--[pnmodurl modname="Newsletter" type="admin" func="send2users"]-->" method="post">
<table id="nladmin-subscribers">
	<tr>
		<th><input type="checkbox" onclick="checkAllFields(1);" id="checkAll" /></th>
		<th><a href="<!--[pnmodurl modname="Newsletter" type="admin" func="view_subscribers" order_by="user_name" order="$order"]-->">name</a></th>
		<th><a href="<!--[pnmodurl modname="Newsletter" type="admin" func="view_subscribers" order_by="user_email" order="$order"]-->">email</a></th>
		<th><a href="<!--[pnmodurl modname="Newsletter" type="admin" func="view_subscribers" order_by="nl_type" order="$order"]-->">type</a></th>
		<th><a href="<!--[pnmodurl modname="Newsletter" type="admin" func="view_subscribers" order_by="nl_frequency" order="$order"]-->">frequency</a></th>
		<th><a href="<!--[pnmodurl modname="Newsletter" type="admin" func="view_subscribers" order_by="active" order="$order"]-->">active</a></th>
		<th><a href="<!--[pnmodurl modname="Newsletter" type="admin" func="view_subscribers" order_by="approved" order="$order"]-->">approved</a></th>
		<th><a href="<!--[pnmodurl modname="Newsletter" type="admin" func="view_subscribers" order_by="last_send_date" order="$order"]-->">last sent</a></th>
		<th><a href="<!--[pnmodurl modname="Newsletter" type="admin" func="view_subscribers" order_by="join_date" order="$order"]-->">join date</a></th>
	</tr>
	<!--[section name="items" loop=$items]-->  
	<tr style="background-color:<!--[cycle values="$bgcolor1,$bgcolor2"]-->;">
		<td><input type="checkbox" name="subscriber_ids[]" value="<!--[$items[items].id|pnvarprephtmldisplay]-->" onclick="checkAllFields(2);" /></td>
		<td><!--[$items[items].user_name|pnvarprephtmldisplay]--></td>
		<td><!--[$items[items].user_email|pnvarprephtmldisplay]--></td>
		<td><!--[$items[items].nl_type|pnvarprephtmldisplay]--></td>
		<td><!--[$items[items].nl_frequency|pnvarprephtmldisplay]--></td>
		<td><a href="index.php?module=Newsletter&amp;type=admin&amp;func=change_user_status&amp;id=<!--[$items[items].id|pnvarprephtmldisplay]-->&amp;status=<!--[$items[items].active_val|pnvarprephtmldisplay]-->&amp;authid=<!--[pnsecgenauthkey module="Newsletter"]-->" onclick="return confirm('change user status?');" /><!--[$items[items].active_text|pnvarprephtmldisplay]--></td>
		<td><a href="index.php?module=Newsletter&amp;type=admin&amp;func=change_user_approval_status&amp;id=<!--[$items[items].id|pnvarprephtmldisplay]-->&amp;approved=<!--[$items[items].approved_val|pnvarprephtmldisplay]-->&amp;authid=<!--[pnsecgenauthkey module="Newsletter"]-->" onclick="return confirm('change user approval status?');" /><!--[$items[items].approved_text|pnvarprephtmldisplay]--></td>
		<td><!--[$items[items].last_send_date|pnvarprephtmldisplay]--></td>
		<td><!--[$items[items].join_date|pnvarprephtmldisplay]--></td>
	</tr>
	<!--[/section]-->
	<tr>
		<td colspan="3" style="border:none;">Update "last sent" dates? <input type="checkbox" name="update_send_dates" value="1" /> <em>(checked=yes)</em></td>
		<td colspan="6" style="border:none;">
			<input type="hidden" name="authid" value="<!--[pnsecgenauthkey module="Newsletter"]-->" />
			<input type="submit" value="Send to [0] users" name="sendChecked" id="sendChecked" />
		</td>
	</tr>
</table>
</form>
<!--[pager show="page" 
           rowcount=$pager.numitems 
		   limit=$pager.itemsperpage 
		   txt_first=$L_MORE 
		   posvar=startnum 
		   shift=1]-->


<div style="height:20px;"></div>

<form action="<!--[pnmodurl modname="Newsletter" type="admin" func="remove_subscriber"]-->" method="post">
	<table style="width:100%; padding:10px;">
		<tr>
			<th colspan="2"><!--[pnml name="_REMOVE_SUBSCRIBER"]--></th>
		</tr>
		<tr>
			<td style="text-align:right;">By User Name:</td>
			<td><input name="user_name" type="text" style="width:150px;" /></td>
		</tr>
		<tr>
			<td style="text-align:right;">By User E-Mail:</td>
			<td><input name="user_email" type="text" style="width:150px;" /></td>
		</tr>
		<tr>
			<td colspan="2" style="height:10px;"></td>
		</tr>
		<tr>
			<td></td>
			<td>
				<input type="hidden" name="authid" value="<!--[pnsecgenauthkey module="Newsletter"]-->" />
				<input type="submit" name="submit" value="remove subscriber" />
			</td>
		</tr>
	</table>
</form>

</div>